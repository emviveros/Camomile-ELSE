#N canvas 531 129 694 386 10;
#X obj 55 29 inlet;
#X obj 288 135 text size \$0-markov;
#X obj 288 158 t b f;
#X obj 288 181 random;
#X obj 246 210 s \$0-index;
#X obj 433 29 inlet;
#N canvas 544 85 446 744 create 0;
#X obj 194 91 text define \$0-markov;
#X msg 194 68 clear;
#X obj 115 563 sel -1;
#X obj 173 662 list;
#X obj 115 520 text search \$0-markov, f 9;
#X obj 216 619 text get \$0-markov, f 9;
#X obj 173 695 text set \$0-markov, f 35;
#X obj 157 597 list;
#X obj 157 620 t l b;
#X obj 115 474 list split, f 27;
#X obj 274 451 r \$0-order;
#X obj 117 213 s \$0-index;
#X msg 117 193 0;
#X obj 194 45 r \$0-clear;
#X obj 160 190 s \$0-order;
#X obj 181 118 r \$0-order.in;
#X obj 181 335 array get \$0-indices, f 10;
#X obj 103 233 array get \$0-indices;
#X obj 88 266 array size \$0-indices;
#X obj 181 312 -;
#X obj 196 289 r \$0-order;
#X obj 88 450 list store, f 16;
#X obj 88 312 until;
#X obj 88 335 f;
#X obj 109 358 r \$0-order;
#X msg 88 427 get \$1 \$2;
#X obj 88 404 pack;
#X obj 109 381 + 1;
#X obj 118 335 + 1;
#X obj 88 289 t f b f;
#N canvas 287 198 211 264 test 0;
#X obj 39 34 inlet;
#X obj 39 195 outlet;
#X obj 39 80 !=;
#X obj 39 103 sel 1 0;
#X obj 39 57 text size \$0-memory;
#X obj 58 172 print [markov];
#X msg 58 126 can't create chain (memory is empty), f 18;
#X connect 0 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 3 1 6 0;
#X connect 4 0 2 0;
#X connect 6 0 5 0;
#X restore 74 95 pd test;
#X obj 74 118 t b b b b b b b;
#X obj 193 143 array size \$0-indices;
#X obj 160 169 clip 1;
#X obj 208 662 f 1e+08;
#X obj 216 596 trigger float float;
#X obj 115 497 t l l, f 11;
#X obj 268 261 t a;
#X obj 181 388 list append, f 15;
#X obj 129 312 f 0;
#X obj 160 146 f \$1;
#X obj 74 17 inlet;
#X obj 74 72 b;
#X floatatom 232 312 5 0 0 0 - - -;
#X text 280 283 no circular;
#X connect 1 0 0 0;
#X connect 2 0 7 0;
#X connect 2 1 35 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 5 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X connect 8 1 34 0;
#X connect 9 0 36 0;
#X connect 9 1 3 1;
#X connect 10 0 9 1;
#X connect 12 0 11 0;
#X connect 13 0 1 0;
#X connect 15 0 40 1;
#X connect 16 0 38 0;
#X connect 17 0 37 0;
#X connect 18 0 29 0;
#X connect 19 0 16 0;
#X connect 20 0 19 1;
#X connect 21 0 9 0;
#X connect 22 0 23 0;
#X connect 23 0 26 0;
#X connect 23 0 28 0;
#X connect 24 0 27 0;
#X connect 25 0 21 0;
#X connect 26 0 25 0;
#X connect 27 0 26 1;
#X connect 28 0 23 1;
#X connect 29 0 22 0;
#X connect 29 1 39 0;
#X connect 29 2 19 0;
#X connect 30 0 31 0;
#X connect 31 1 18 0;
#X connect 31 2 17 0;
#X connect 31 3 12 0;
#X connect 31 4 40 0;
#X connect 31 5 32 0;
#X connect 31 6 1 0;
#X connect 32 0 33 2;
#X connect 33 0 14 0;
#X connect 34 0 6 1;
#X connect 35 0 5 0;
#X connect 35 1 6 1;
#X connect 36 0 4 0;
#X connect 36 1 7 1;
#X connect 37 0 38 1;
#X connect 38 0 21 1;
#X connect 39 0 23 1;
#X connect 40 0 33 0;
#X connect 41 0 42 0;
#X connect 42 0 30 0;
#X connect 43 0 16 0;
#X restore 162 265 pd create;
#X obj 55 75 route bang;
#N canvas 558 110 518 686 output 0;
#X obj 51 34 inlet;
#X obj 51 168 text get \$0-markov;
#X obj 51 196 list split;
#X obj 123 196 r \$0-order;
#X obj 79 268 t b f;
#X obj 79 291 random;
#X obj 79 245 list length;
#X obj 79 337 list store;
#X msg 79 314 get \$1 1;
#X obj 109 461 text search \$0-markov;
#X obj 109 484 s \$0-index;
#X obj 81 141 r \$0-index;
#X obj 64 619 outlet;
#X obj 64 542 t l l;
#X obj 64 588 list split;
#X obj 121 542 list length;
#X obj 121 565 - 1;
#X obj 64 515 text get \$0-memory;
#X obj 51 141 f;
#X obj 51 398 list split 1;
#X obj 79 365 t f f, f 9;
#X obj 51 466 b;
#X obj 64 489 f;
#X obj 79 219 trigger list list;
#X obj 109 433 list;
#X obj 51 61 text size \$0-markov;
#X obj 51 84 !=;
#X obj 51 107 sel 1;
#X obj 342 225 sel 2;
#X obj 99 109 print [markov];
#X msg 99 86 no chain created;
#X obj 349 322 v \$0-reset;
#X obj 349 343 sel 1 0;
#X text 347 255 outlet;
#X text 351 277 not yet;
#X connect 0 0 25 0;
#X connect 1 0 2 0;
#X connect 1 1 28 0;
#X connect 2 0 19 0;
#X connect 2 1 23 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 0 8 0;
#X connect 6 0 4 0;
#X connect 7 0 20 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 11 0 18 1;
#X connect 13 0 14 0;
#X connect 13 1 15 0;
#X connect 14 0 12 0;
#X connect 15 0 16 0;
#X connect 16 0 14 1;
#X connect 17 0 13 0;
#X connect 18 0 1 0;
#X connect 19 0 21 0;
#X connect 19 1 24 0;
#X connect 20 0 22 1;
#X connect 20 1 24 1;
#X connect 21 0 22 0;
#X connect 22 0 17 0;
#X connect 23 0 6 0;
#X connect 23 1 7 1;
#X connect 24 0 9 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 18 0;
#X connect 27 1 30 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X restore 55 151 pd output;
#X msg 246 108 0;
#X obj 203 238 s \$0-order.in;
#X obj 288 107 b;
#X obj 161 81 route create order reset random clear learn;
#N canvas 450 111 550 456 learn 0;
#X obj 177 197 sel -1;
#X obj 177 219 list;
#X obj 134 105 list append |||;
#X obj 177 242 t l b;
#X obj 134 151 text search \$0-memory, f 9;
#X obj 227 267 text size \$0-memory, f 9;
#X obj 177 338 text set \$0-memory 100000;
#X obj 219 310 array set \$0-indices;
#X obj 296 264 f;
#X obj 324 264 + 1;
#X obj 311 214 r \$0-clear;
#X msg 311 237 0;
#X obj 324 287 array size \$0-indices;
#X obj 77 82 route bang;
#X obj 134 128 trigger list list bang;
#X obj 76 52 inlet;
#X connect 0 0 1 0;
#X connect 0 1 7 0;
#X connect 1 0 3 0;
#X connect 2 0 14 0;
#X connect 3 0 6 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 7 0;
#X connect 8 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 8 1;
#X connect 9 0 12 0;
#X connect 10 0 11 0;
#X connect 11 0 8 1;
#X connect 13 1 2 0;
#X connect 14 0 4 0;
#X connect 14 1 1 1;
#X connect 14 2 8 0;
#X connect 15 0 13 0;
#X restore 433 114 pd learn;
#X obj 55 332 outlet;
#X text 455 189 Part of ELSE \; https://github.com/porres/pd-else;
#X text 457 170 Alexandre Torres Porres (2020);
#N canvas 654 285 499 298 savestate 0;
#X obj 125 156 s \$0-order;
#X obj 339 144 text fromlist \$0-memory, f 13;
#X obj 196 149 text fromlist \$0-markov, f 9;
#X obj 268 223 array set \$0-indices;
#X obj 268 154 t a a;
#X obj 295 177 list length;
#X obj 295 200 array size \$0-indices;
#X obj 54 158 s \$0-index;
#X obj 54 74 savestate;
#X obj 54 97 list trim;
#X obj 54 120 route index order markov indices memory, f 60;
#N canvas 0 23 492 607 save 0;
#X obj 173 76 text tolist \$0-memory;
#X obj 143 214 text tolist \$0-markov;
#X obj 124 308 f;
#X obj 139 285 r \$0-order;
#X obj 124 354 s \$0-savestate;
#X obj 173 122 s \$0-savestate;
#X obj 158 191 s \$0-savestate;
#X obj 143 260 s \$0-savestate;
#X obj 158 145 array get \$0-indices;
#X obj 124 377 r \$0-index;
#X obj 109 400 f;
#X obj 109 446 s \$0-savestate;
#X obj 173 99 list prepend memory;
#X obj 158 168 list prepend indices;
#X obj 143 237 list prepend markov;
#X obj 124 331 list prepend order;
#X obj 54 43 f \$2;
#X obj 54 65 sel 0;
#X obj 109 423 list prepend index;
#X obj 112 45 b;
#X obj 106 483 r \$0-savestate;
#X obj 106 504 outlet;
#X obj 54 17 inlet;
#X connect 0 0 12 0;
#X connect 1 0 14 0;
#X connect 2 0 15 0;
#X connect 3 0 2 1;
#X connect 8 0 13 0;
#X connect 9 0 10 1;
#X connect 10 0 18 0;
#X connect 12 0 5 0;
#X connect 13 0 6 0;
#X connect 14 0 7 0;
#X connect 15 0 4 0;
#X connect 16 0 17 0;
#X connect 17 1 19 0;
#X connect 18 0 11 0;
#X connect 19 0 10 0;
#X connect 19 0 0 0;
#X connect 19 0 2 0;
#X connect 19 0 1 0;
#X connect 19 0 8 0;
#X connect 20 0 21 0;
#X connect 22 0 16 0;
#X restore 140 42 pd save;
#X connect 4 0 3 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X connect 8 0 9 0;
#X connect 8 1 11 0;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 10 1 0 0;
#X connect 10 2 2 0;
#X connect 10 3 4 0;
#X connect 10 4 1 0;
#X connect 11 0 8 0;
#X restore 332 280 pd savestate;
#X obj 489 29 inlet;
#X obj 489 68 s \$0-order.in;
#N canvas 0 23 368 279 clear 0;
#X obj 141 30 inlet;
#X msg 167 98 clear;
#X obj 167 121 text define \$0-memory;
#X msg 151 148 resize 1 \, const 0;
#X obj 151 171 array define \$0-indices 1;
#X obj 111 145 b;
#X obj 109 200 s \$0-clear;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 5 0 6 0;
#X restore 331 110 pd clear;
#X text 454 227 Based on a patch from the pd forum by ingox, f 23
;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 4 0;
#X connect 5 0 13 0;
#X connect 7 0 8 0;
#X connect 7 1 12 0;
#X connect 8 0 14 0;
#X connect 9 0 4 0;
#X connect 11 0 1 0;
#X connect 12 0 6 0;
#X connect 12 1 10 0;
#X connect 12 2 9 0;
#X connect 12 3 11 0;
#X connect 12 4 20 0;
#X connect 12 5 13 0;
#X connect 18 0 19 0;
