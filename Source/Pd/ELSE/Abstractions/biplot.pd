#N canvas 456 218 1040 458 10;
#X declare -path else;
#N canvas 660 137 340 350 plot 0;
#N canvas 902 365 351 322 init 0;
#X obj 154 274 s \$0-dbrange;
#X obj 236 72 v sr_\$0;
#X msg 184 212 400;
#X msg 154 241 24;
#X obj 227 151 v midi_range_\$0;
#X obj 227 125 ftom;
#X msg 227 99 8750.55;
#X obj 219 210 v pi_\$0;
#N canvas 760 51 502 549 get-freq 0;
#X msg 211 218 resize \$1;
#X obj 88 66 change;
#X obj 230 157 v table_size_\$0;
#X obj 88 99 trigger bang float;
#X obj 211 192 change 400;
#X obj 88 29 inlet;
#N canvas 192 80 935 668 loop 0;
#X obj 106 192 until;
#X obj 144 241 + 1;
#X msg 124 216 0;
#X obj 106 95 t f f;
#X obj 483 216 until;
#X obj 529 265 + 1;
#X msg 501 241 0;
#X obj 106 270 t f f;
#X obj 211 355 +;
#X obj 106 370 mtof;
#X obj 106 144 t f b f;
#X obj 483 191 t f b f;
#X obj 483 326 /;
#X obj 106 31 inlet;
#X obj 106 574 outlet;
#X obj 259 583 outlet;
#X obj 483 144 expr table_size_\$0 - $f1;
#X obj 483 265 f;
#X obj 483 379 expr pow($f1 \, 0.4);
#X obj 106 241 f;
#X obj 483 296 trigger f f;
#X obj 106 63 expr rint(table_size_\$0 * 0.98);
#X obj 483 407 * 20.6017;
#X text 556 407 MIDI 16;
#X obj 106 298 expr (($f1 + 1) * (midi_range_\$0 / $f2)) + 16;
#X obj 106 465 expr $f1 * (2 * pi_\$0) / 44100;
#X obj 483 498 expr $f1 * (2 * pi_\$0) / 44100;
#X connect 0 0 19 0;
#X connect 1 0 19 1;
#X connect 2 0 19 1;
#X connect 3 0 10 0;
#X connect 3 1 16 0;
#X connect 4 0 17 0;
#X connect 5 0 17 1;
#X connect 6 0 17 1;
#X connect 7 0 24 0;
#X connect 7 1 8 0;
#X connect 8 0 15 0;
#X connect 9 0 25 0;
#X connect 10 0 0 0;
#X connect 10 1 2 0;
#X connect 10 2 24 1;
#X connect 11 0 4 0;
#X connect 11 1 6 0;
#X connect 11 2 12 1;
#X connect 12 0 18 0;
#X connect 13 0 21 0;
#X connect 16 0 8 1;
#X connect 16 0 11 0;
#X connect 17 0 5 0;
#X connect 17 0 20 0;
#X connect 18 0 22 0;
#X connect 19 0 1 0;
#X connect 19 0 7 0;
#X connect 20 0 12 0;
#X connect 20 1 15 0;
#X connect 21 0 3 0;
#X connect 22 0 26 0;
#X connect 24 0 9 0;
#X connect 25 0 14 0;
#X connect 26 0 14 0;
#X restore 88 129 pd loop;
#X obj 211 257 s freq_\$0;
#X obj 73 280 expr cos($f1) \; sin($f1) \; cos($f1 * 2) \; sin($f1
* 2) \; $f2;
#X obj 66 433 tabwrite sinW_\$0;
#X obj 99 461 tabwrite cos2W_\$0;
#X obj 35 397 tabwrite cosW_\$0;
#X obj 131 492 tabwrite sin2W_\$0;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 2 0;
#X connect 3 1 4 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 6 0 8 0;
#X connect 6 1 8 1;
#X connect 8 0 11 0;
#X connect 8 1 9 0;
#X connect 8 2 10 0;
#X connect 8 3 12 0;
#X connect 8 4 9 1;
#X connect 8 4 10 1;
#X connect 8 4 11 1;
#X connect 8 4 12 1;
#X restore 184 240 pd get-freq;
#X obj 26 255 table sin2W_\$0 400;
#X obj 26 238 table cos2W_\$0 400;
#X obj 27 205 table sinW_\$0 400;
#X obj 27 188 table cosW_\$0 400;
#X obj 219 182 pi;
#X obj 236 49 sr~;
#X obj 90 59 trigger bang bang bang;
#X obj 18 128 unpack s s;
#X obj 16 149 s \$0-a;
#X obj 17 94 pack2 \$0-amp \$0-fase, f 15;
#X obj 68 152 s \$0-ph;
#X obj 278 209 s \$0-pi;
#X obj 90 23 lb -init;
#X connect 2 0 8 0;
#X connect 3 0 0 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 13 0 7 0;
#X connect 13 0 20 0;
#X connect 14 0 1 0;
#X connect 15 0 18 0;
#X connect 15 1 2 0;
#X connect 15 1 3 0;
#X connect 15 2 6 0;
#X connect 15 2 13 0;
#X connect 15 2 14 0;
#X connect 16 0 17 0;
#X connect 16 1 19 0;
#X connect 18 0 16 0;
#X connect 21 0 15 0;
#X restore 227 150 pd init \; tables;
#N canvas 436 43 788 438 H(z) 0;
#X obj 123 43 inlet;
#X obj 239 45 inlet;
#X text 170 44 index;
#X obj 171 301 /;
#X obj 300 287 -;
#X obj 123 113 list;
#X text 278 45 coeficientes;
#X obj 343 234 car2pol;
#X obj 121 238 car2pol;
#X msg 520 267 const 0;
#X obj 520 244 r \$0-init;
#X obj 504 315 s \$0-amp;
#X obj 520 295 s \$0-fase;
#X obj 83 81 t f f;
#X obj 69 119 s \$0-i;
#X obj 296 349 outlet;
#X obj 172 350 outlet;
#X obj 123 147 expr $f4 + ($f5 * cosW_\$0[$f1]) + ($f6 * cos2W_\$0[$f1])
\; ($f5 * sinW_\$0[$f1]) + ($f6 * sin2W_\$0[$f1]) \; 1 - ($f2 * cosW_\$0[$f1])
- ($f3 * cos2W_\$0[$f1]) \; 0 - ($f2 * sinW_\$0[$f1]) - ($f3 * sin2W_\$0[$f1])
, f 57;
#X obj 171 325 lin2db;
#X connect 0 0 13 0;
#X connect 1 0 5 1;
#X connect 3 0 18 0;
#X connect 4 0 15 0;
#X connect 5 0 17 0;
#X connect 7 0 3 1;
#X connect 7 1 4 1;
#X connect 8 0 3 0;
#X connect 8 1 4 0;
#X connect 9 0 11 0;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X connect 13 0 14 0;
#X connect 13 1 5 0;
#X connect 17 0 8 0;
#X connect 17 1 8 1;
#X connect 17 2 7 0;
#X connect 17 3 7 1;
#X connect 18 0 16 0;
#X restore 161 236 pd H(z);
#X obj 101 151 trigger bang list;
#X obj 101 178 loop 400;
#X obj 83 39 inlet;
#X obj 146 71 s \$0-init;
#N canvas 473 23 604 534 tabwrite-amp 0;
#X obj 136 55 inlet;
#X obj 76 159 expr $f2 + $s3[$f1];
#X obj 48 118 r \$0-i;
#X obj 48 141 t f f;
#X obj 159 104 r \$0-dbrange;
#X obj 133 103 /;
#X obj 76 187 clip -1 1;
#X obj 55 227 swap;
#X obj 62 274 tabwrite \$0-amp;
#X obj 209 162 r \$0-a;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 1 0;
#X connect 4 0 5 1;
#X connect 5 0 1 1;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 9 0 1 2;
#X restore 161 296 pd tabwrite-amp;
#N canvas 473 23 323 338 tabwrite-phase 0;
#X obj 148 54 inlet;
#X obj 88 158 expr $f2 + $s3[$f1];
#X obj 61 97 r \$0-i;
#X obj 61 120 t f f;
#X obj 67 226 swap;
#N canvas 64 23 450 300 wrap 0;
#X obj 209 120 t f f;
#X obj 198 144 * -1;
#X obj 213 96 r \$0-pi;
#X obj 137 49 inlet;
#X obj 153 207 outlet;
#X obj 139 166 wrap2;
#X connect 0 0 1 0;
#X connect 0 1 5 2;
#X connect 1 0 5 1;
#X connect 2 0 0 0;
#X connect 3 0 5 0;
#X connect 5 0 4 0;
#X restore 88 191 pd wrap;
#X obj 218 160 r \$0-ph;
#X obj 74 273 tabwrite \$0-fase;
#X connect 0 0 1 1;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 1 0;
#X connect 4 0 7 0;
#X connect 4 1 7 1;
#X connect 5 0 4 1;
#X connect 6 0 1 2;
#X restore 200 266 pd tabwrite-phase;
#X obj 83 69 t b l b;
#X msg 52 99 clear;
#X obj 101 116 group 5;
#X connect 1 0 6 0;
#X connect 1 1 7 0;
#X connect 2 0 3 0;
#X connect 2 1 1 1;
#X connect 3 0 1 0;
#X connect 4 0 8 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 2 5 0;
#X connect 9 0 10 0;
#X connect 10 0 2 0;
#X restore 29 198 pd plot;
#X obj 101 103 cnv 15 898 283 empty empty empty 18 9 1 15 -262144 -1
0;
#X obj 153 109 cnv 15 805 235 empty empty empty 20 12 0 14 -1 -66577
0;
#X obj 488 366 cnv 15 15 15 empty empty Kilohertz 18 9 1 16 -262144
-1 0;
#X obj 157 314 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 258 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 286 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#X obj 157 230 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#N canvas 391 118 975 563 (subpatch) 0;
#X array \$0-fase 400 float 0;
#X coords 0 3.14159 399 -3.14159 800 111 1 0 0;
#X restore 156 230 graph;
#X obj 157 198 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 142 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X text 261 344 0.05;
#X text 161 344 0.02;
#X obj 157 170 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#X text 862 343 10;
#X text 939 344 20;
#X text 787 343 5;
#X text 684 343 2;
#X text 606 344 1;
#X text 520 344 0.5;
#X text 418 344 0.2;
#X text 338 344 0.1;
#X text 960 216 -24;
#X text 967 164 0;
#X obj 114 176 cnv 15 15 15 empty empty dB 0 9 1 17 -262144 -1 0;
#X text 961 193 -12;
#X obj 157 114 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#N canvas 64 23 450 278 (subpatch) 0;
#X coords 0 1 100 -1 100 227 1;
#X restore 174 114 graph;
#N canvas 64 23 450 278 (subpatch) 0;
#X coords 0 1 100 -1 77 227 1;
#X restore 274 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 80 227 1;
#X restore 351 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 102 227 1;
#X restore 431 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 533 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 611 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 103 227 1;
#X restore 689 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 792 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 870 114 graph;
#N canvas 391 118 975 563 (subpatch) 0;
#X array \$0-amp 400 float 0;
#X coords 0 1 399 -1 800 113 1 0 0;
#X restore 156 113 graph;
#X obj 106 162 cnv 15 15 15 empty empty Amp 0 0 1 17 -262144 -1 0;
#X obj 102 276 cnv 15 15 15 empty empty Phase 0 0 1 17 -262144 -1 0
;
#X text 958 332 -pi;
#X text 957 306 -pi/2;
#X text 960 276 0;
#X text 960 249 pi/2;
#X text 961 227 pi;
#X obj 109 296 cnv 15 15 15 empty empty rad 0 0 1 17 -262144 -1 0;
#X text 962 134 12;
#X text 964 109 24;
#X obj 18 156 inlet;
#X obj 108 101 cnv 8 888 8 empty empty empty 18 9 1 15 -262144 -1 0
;
#X obj 18 235 outlet;
#X obj 108 381 cnv 8 888 8 empty empty empty 18 9 1 15 -262144 -1 0
;
#X text 173 45 Part of ELSE \; https://github.com/porres/pd-else;
#X text 175 26 Alexandre Torres Porres (2017);
#X obj 556 49 declare -path else;
#X connect 47 0 0 0;
#X connect 47 0 49 0;
#X coords 0 -1 1 1 900 290 1 100 100;
